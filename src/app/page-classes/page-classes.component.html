<div class="p-grid" *ngIf="isStudent">
    <div class="p-col-8 p-offset-2 margin-vertical">
        <h3 *ngIf="!!!classes.length">No classes found!</h3>
        <p-card
            *ngFor="let item of classes"
            header="{{ item.elective.name }}, v{{ item.elective.version }}, teacher: {{ item.teacher.name }}"
            class="item"
            [routerLink]="['/class', item.id]"
        >
        </p-card>
    </div>
</div>
<div class="p-grid" *ngIf="!isStudent">
    <div class="p-col-8 p-offset-2 margin-vertical">
        <p-table
            [value]="classes"
            [lazy]="true"
            [paginator]="true"
            [rows]="25"
            [totalRecords]="totalRecords"
            [loading]="loading"
            (onLazyLoad)="setPage($event)"
            dataKey="id"
            styleClass="p-datatable-gridlines"
            *ngIf="isAdmin"
        >
            <ng-template pTemplate="header">
                <th>Elective</th>
                <th>Version</th>
                <th>Students</th>
            </ng-template>
            <ng-template pTemplate="body" let-item>
                <tr>
                    <td>{{ item.elective.name }}</td>
                    <td>{{ item.elective.version }}</td>
                    <td>
                        <button
                            pButton
                            type="button"
                            class="p-button-rounded p-button-info p-mr-2 p-button-icon-only"
                            icon="pi pi-eye"
                            (click)="viewStudents(item)"
                        ></button>
                        <button
                            pButton
                            type="button"
                            class="p-button-rounded p-button-secondary p-mr-2 p-button-icon-only"
                            icon="pi pi-arrow-right"
                            [routerLink]="['/class', item.id]"
                        ></button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
        <p-table
            [value]="classes"
            [paginator]="true"
            [rows]="10"
            dataKey="id"
            styleClass="p-datatable-gridlines"
            *ngIf="isTeacher"
        >
            <ng-template pTemplate="header">
                <th>Elective</th>
                <th>Version</th>
                <th>Students</th>
            </ng-template>
            <ng-template pTemplate="body" let-item>
                <tr>
                    <td>{{ item.elective.name }}</td>
                    <td>{{ item.elective.version }}</td>
                    <td>
                        <button
                            pButton
                            type="button"
                            class="p-button-rounded p-button-info p-mr-2 p-button-icon-only"
                            icon="pi pi-eye"
                            (click)="viewStudents(item)"
                        ></button>
                        <button
                            pButton
                            type="button"
                            class="p-button-rounded p-button-secondary p-mr-2 p-button-icon-only"
                            icon="pi pi-arrow-right"
                            [routerLink]="['/class', item.id]"
                        ></button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>

<p-dialog [(visible)]="studentsDialog" [style]="{ width: '950px' }" header="Elective students" [modal]="true">
    <p-table [value]="students" [paginator]="true" [rows]="10" dataKey="id" styleClass="p-datatable-gridlines">
        <ng-template pTemplate="header">
            <th>Name</th>
            <th>Roll no</th>
            <th>Batch</th>
        </ng-template>
        <ng-template pTemplate="body" let-item>
            <tr>
                <td>{{ item.name }}</td>
                <td>{{ item.rollNo }}</td>
                <td>{{ item.batch.batchString }}</td>
            </tr>
        </ng-template>
    </p-table>
</p-dialog>
